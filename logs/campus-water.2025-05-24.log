2025-05-24 10:15:47.906 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 23096 (D:\cursorAICode\target\classes started by 12187 in D:\cursorAICode)
2025-05-24 10:15:47.908 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 10:15:49.211 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 10:15:49.229 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 10:15:49.234 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 10:15:49.235 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 10:15:49.416 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 10:15:49.416 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1468 ms
2025-05-24 10:15:49.562 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 10:15:49.793 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 10:15:50.086 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 10:15:50.472 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 10:15:50.490 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 10:15:51.033 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 10:15:51.053 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 10:15:51.067 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.933 seconds (JVM running for 4.659)
2025-05-24 10:18:57.152 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "time": "09:30:56",
     "id": 1,
     "drink": 100
   }
2025-05-24 10:18:57.463 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:18:57.935 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 处理饮水记录数据失败: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`campus_water_system`.`drink_record`, CONSTRAINT `drink_record_ibfk_1` FOREIGN KEY (`dispenser_id`) REFERENCES `water_dispenser` (`id`))
### The error may exist in com/campus/water/mapper/DrinkRecordMapper.java (best guess)
### The error may involve com.campus.water.mapper.DrinkRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO drink_record (dispenser_id, card_id, card_name, drink, time) VALUES (?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`campus_water_system`.`drink_record`, CONSTRAINT `drink_record_ibfk_1` FOREIGN KEY (`dispenser_id`) REFERENCES `water_dispenser` (`id`))
; Cannot add or update a child row: a foreign key constraint fails (`campus_water_system`.`drink_record`, CONSTRAINT `drink_record_ibfk_1` FOREIGN KEY (`dispenser_id`) REFERENCES `water_dispenser` (`id`)); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`campus_water_system`.`drink_record`, CONSTRAINT `drink_record_ibfk_1` FOREIGN KEY (`dispenser_id`) REFERENCES `water_dispenser` (`id`))
2025-05-24 10:20:24.378 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 10:20:24.391 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 10:20:29.799 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 45412 (D:\cursorAICode\target\classes started by 12187 in D:\cursorAICode)
2025-05-24 10:20:29.801 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 10:20:31.195 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 10:20:31.206 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 10:20:31.209 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 10:20:31.209 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 10:20:31.377 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 10:20:31.378 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1528 ms
2025-05-24 10:20:31.507 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 10:20:31.745 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 10:20:31.936 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 10:20:32.355 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 10:20:32.366 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 10:20:32.850 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 10:20:32.885 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 10:20:32.904 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.612 seconds (JVM running for 4.479)
2025-05-24 10:20:38.174 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "time": "09:30:56",
     "id": 1,
     "drink": 100
   }
2025-05-24 10:20:38.262 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:20:38.352 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [1] 不存在，无法添加饮水记录
2025-05-24 10:22:40.029 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "time": "09:30:56",
     "dispenserId": 1,
     "drink": 100
   }
2025-05-24 10:22:40.031 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:22:40.041 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 10:24:36.373 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 1,
  "locate": "教学楼A区",
  "TDS": "合格",
  "status": 0,
  "time": "09:30:00"
}
2025-05-24 10:24:36.374 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 10:24:36.394 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=1, locate=教学楼A区, tds=合格, status=0, tip=null, time=null)
2025-05-24 10:34:55.169 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 2,
  "locate": "教学楼B区",
  "TDS": "合格",
  "status": 0,
  "time": "10:30:00"
}
2025-05-24 10:34:55.170 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 10:34:55.185 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=2, locate=教学楼B区, tds=合格, status=0, tip=null, time=null)
2025-05-24 10:35:51.565 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subWatercard] 的消息: {
  "id": "001",
  "name": "张三"
}
2025-05-24 10:35:51.565 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 10:35:51.576 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=001, name=张三)
2025-05-24 10:36:23.414 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
  "time": "09:30:56",
  "id": 1,
  "drink": 100
}
2025-05-24 10:36:23.415 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:36:23.495 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=1, cardId=null, cardName=null, drink=100, time=09:30:56)
2025-05-24 10:39:20.077 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
  "time": "09:30:56",
  "dispenserId": 1,
  "cardId": "001",
  "drink": 100
}
2025-05-24 10:39:20.078 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:39:20.084 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 10:47:05.579 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 51388 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 10:47:05.581 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 10:47:07.002 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 10:47:07.008 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 10:47:07.009 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 10:47:07.010 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 10:47:07.095 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 10:47:07.096 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1473 ms
2025-05-24 10:47:07.274 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 10:47:07.646 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 10:47:07.842 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 10:47:08.220 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 10:47:08.235 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 10:47:08.588 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 10:47:08.619 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 10:47:08.635 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.596 seconds (JVM running for 4.518)
2025-05-24 10:52:15.221 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
     "id": 1,
     "locate": "教学楼A区",
     "TDS": "50",
     "status": 1
   }
2025-05-24 10:52:15.426 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 10:52:15.531 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=1, locate=教学楼A区, tds=50, status=1, tip=null, time=null)
2025-05-24 10:52:21.079 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 10:52:21.095 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 10:52:27.318 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 25992 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 10:52:27.320 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 10:52:28.713 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 10:52:28.724 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 10:52:28.726 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 10:52:28.726 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 10:52:28.832 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 10:52:28.832 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1466 ms
2025-05-24 10:52:29.106 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 10:52:29.268 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 10:52:29.501 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 10:52:29.875 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 10:52:29.888 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 10:52:30.262 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 10:52:30.295 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 10:52:30.306 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.403 seconds (JVM running for 4.174)
2025-05-24 10:52:35.233 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
     "id": 1,
     "locate": "教学楼A区",
     "TDS": "50",
     "status": 1
   }
2025-05-24 10:52:35.333 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 10:52:35.476 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
; Duplicate entry '1' for key 'water_dispenser.PRIMARY'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
2025-05-24 10:53:05.245 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
     "id": 1,
     "locate": "教学楼A区",
     "TDS": "50",
     "status": 1
   }
2025-05-24 10:53:05.246 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 10:53:05.256 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=1, locate=教学楼A区, tds=50, status=1, tip=null, time=null)
2025-05-24 10:53:30.287 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subWatercard] 的消息:    {
     "id": "CARD001",
     "name": "张三"
   }
2025-05-24 10:53:30.288 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 10:53:30.295 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=CARD001, name=张三)
2025-05-24 10:53:54.482 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "dispenserId": 1,
     "cardId": "CARD001",
     "drink": 200,
     "time": "2024-03-20 10:30:00"
   }
2025-05-24 10:53:54.482 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:53:54.514 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 处理饮水记录数据失败: 
### Error updating database.  Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
### The error may exist in com/campus/water/mapper/DrinkRecordMapper.java (best guess)
### The error may involve com.campus.water.mapper.DrinkRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO drink_record (dispenser_id, card_id, card_name, drink, time) VALUES (?, ?, ?, ?, ?)
### Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
; Data truncation: Data too long for column 'time' at row 1; nested exception is com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
2025-05-24 10:54:21.705 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "dispenserId": 1,
     "cardId": "CARD001",
     "drink": 200,
     "time": " 10:30:00"
   }
2025-05-24 10:54:21.705 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:54:21.712 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 处理饮水记录数据失败: 
### Error updating database.  Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
### The error may exist in com/campus/water/mapper/DrinkRecordMapper.java (best guess)
### The error may involve com.campus.water.mapper.DrinkRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO drink_record (dispenser_id, card_id, card_name, drink, time) VALUES (?, ?, ?, ?, ?)
### Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
; Data truncation: Data too long for column 'time' at row 1; nested exception is com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
2025-05-24 10:54:36.977 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "dispenserId": 1,
     "cardId": "CARD001",
     "drink": 200,
     "time": "10:30:00"
   }
2025-05-24 10:54:36.977 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 10:54:36.990 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=1, cardId=CARD001, cardName=张三, drink=200, time=10:30:00)
2025-05-24 10:55:43.823 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subTip] 的消息:    {
     "id": 1,
     "tip": "故障"
   }
2025-05-24 10:55:43.823 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机故障信息...
2025-05-24 10:55:43.838 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机故障信息更新成功: WaterDispenser(id=1, locate=null, tds=null, status=null, tip=故障, time=null)
2025-05-24 10:56:56.744 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
     "id": 1,
     "locate": "教学楼A区",
     "TDS": "50",
     "status": 1
   }
2025-05-24 10:56:56.745 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 10:56:56.748 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
; Duplicate entry '1' for key 'water_dispenser.PRIMARY'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
2025-05-24 10:59:13.004 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 10:59:13.017 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 10:59:19.112 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 46164 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 10:59:19.116 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 10:59:20.561 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 10:59:20.574 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 10:59:20.577 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 10:59:20.577 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 10:59:20.690 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 10:59:20.690 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1526 ms
2025-05-24 10:59:20.920 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 10:59:21.144 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 10:59:21.348 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 10:59:21.707 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 10:59:21.726 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 10:59:22.295 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 10:59:22.322 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 10:59:22.334 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.798 seconds (JVM running for 4.482)
2025-05-24 11:00:08.660 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
     "id": 1,
     "locate": "教学楼A区",
     "TDS": "50",
     "status": 1
   }
2025-05-24 11:00:08.820 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 11:00:08.895 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=1, locate=教学楼A区, tds=50, status=1, tip=null, time=null)
2025-05-24 11:00:35.946 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subWatercard] 的消息:    {
     "id": "CARD001",
     "name": "张三"
   }
2025-05-24 11:00:35.947 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 11:00:35.955 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=CARD001, name=张三)
2025-05-24 11:01:05.058 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "dispenserId": 1,
     "cardId": "CARD001",
     "drink": 200,
     "time": "2024-03-20 10:30:00"
   }
2025-05-24 11:01:05.059 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 11:01:05.201 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 处理饮水记录数据失败: 
### Error updating database.  Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
### The error may exist in com/campus/water/mapper/DrinkRecordMapper.java (best guess)
### The error may involve com.campus.water.mapper.DrinkRecordMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO drink_record (dispenser_id, card_id, card_name, drink, time) VALUES (?, ?, ?, ?, ?)
### Cause: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
; Data truncation: Data too long for column 'time' at row 1; nested exception is com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'time' at row 1
2025-05-24 11:01:21.977 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息:    {
     "dispenserId": 1,
     "cardId": "CARD001",
     "drink": 200,
     "time": "10:30:00"
   }
2025-05-24 11:01:21.977 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 11:01:21.986 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=1, cardId=CARD001, cardName=张三, drink=200, time=10:30:00)
2025-05-24 11:02:05.192 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subTip] 的消息:    {
     "id": 1,
     "tip": "故障"
   }
2025-05-24 11:02:05.193 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机故障信息...
2025-05-24 11:02:05.206 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机 [1] 故障信息更新成功: 故障
2025-05-24 11:03:16.902 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:03:16.903 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:03:16.933 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:03:16.938 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:03:16.939 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:06:40.462 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:06:40.463 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:06:40.467 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:06:40.470 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:06:40.471 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:06:43.460 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:06:43.460 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:06:43.465 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:06:43.471 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:06:43.472 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:06:52.156 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:06:52.156 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:06:52.163 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:06:52.169 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:06:52.169 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:07:46.140 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:07:46.140 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:07:46.145 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:07:46.152 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:07:46.152 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:07:49.883 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:07:49.884 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:07:49.888 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:07:49.894 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:07:49.894 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:07:53.018 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:07:53.018 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:07:53.022 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:07:53.027 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:07:53.027 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:08:31.150 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息:    {
     "name": "张三"
   }
2025-05-24 11:08:31.151 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水查询请求...
2025-05-24 11:08:31.156 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"name":"张三","sum":200}
2025-05-24 11:08:31.161 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:08:31.161 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水查询结果: {name=张三, sum=200}
2025-05-24 11:09:59.812 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息:    {
       "id": 1
   }
2025-05-24 11:09:59.812 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水查询请求...
2025-05-24 11:09:59.817 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: {"sum":200,"id":1}
2025-05-24 11:09:59.821 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:09:59.822 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水查询结果: {sum=200, id=1}
2025-05-24 11:09:59.824 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"sum":200,"id":1}
2025-05-24 11:09:59.824 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 11:09:59.827 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 11:11:05.931 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息:    {
       "id": 1
   }
2025-05-24 11:11:05.932 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水查询请求...
2025-05-24 11:11:05.935 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: {"sum":200,"id":1}
2025-05-24 11:11:05.945 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:11:05.946 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水查询结果: {sum=200, id=1}
2025-05-24 11:11:05.950 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"sum":200,"id":1}
2025-05-24 11:11:05.950 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 11:11:05.954 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 11:28:54.921 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息:    {
       "id": 1
   }
2025-05-24 11:28:54.923 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水查询请求...
2025-05-24 11:28:54.932 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: {"sum":200,"id":1}
2025-05-24 11:28:54.950 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:28:54.951 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水查询结果: {sum=200, id=1}
2025-05-24 11:28:54.954 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"sum":200,"id":1}
2025-05-24 11:28:54.955 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 11:28:54.956 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 11:28:58.667 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息:    {
       "id": 1
   }
2025-05-24 11:28:58.668 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水查询请求...
2025-05-24 11:28:58.673 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: {"sum":200,"id":1}
2025-05-24 11:28:58.694 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:28:58.694 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水查询结果: {sum=200, id=1}
2025-05-24 11:28:58.696 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"sum":200,"id":1}
2025-05-24 11:28:58.702 [MQTT Call: water-dispenser-backend] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 11:28:58.704 [MQTT Call: water-dispenser-backend] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 11:29:10.856 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 11:29:10.864 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 11:29:17.823 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 48984 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 11:29:17.827 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 11:29:19.219 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 11:29:19.229 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 11:29:19.230 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 11:29:19.230 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 11:29:19.337 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 11:29:19.337 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1456 ms
2025-05-24 11:29:19.488 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 11:29:19.731 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 11:29:19.899 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 11:29:20.270 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 11:29:20.280 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 11:29:20.761 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 11:29:20.779 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 11:29:20.790 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.588 seconds (JVM running for 4.409)
2025-05-24 11:29:28.302 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息:    {
       "id": 1
   }
2025-05-24 11:29:28.395 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水查询请求...
2025-05-24 11:29:28.461 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRidDataPub]: {"locate":"教学楼A区","sum":200,"id":1}
2025-05-24 11:29:28.466 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 11:29:28.466 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水查询结果: {locate=教学楼A区, sum=200, id=1}
2025-05-24 13:45:58.181 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m36s60ms598µs900ns).
2025-05-24 13:46:36.053 [MQTT Ping: campus-water-server] ERROR o.e.p.c.mqttv3.internal.ClientState - campus-water-server: Timed out as no write activity, keepAlive=60,000,000,000 lastOutboundActivity=897,893,304,551,000 lastInboundActivity=897,893,305,567,800 time=898,019,369,583,500 lastPing=897,893,304,561,100
2025-05-24 13:46:36.230 [MQTT Ping: campus-water-server] ERROR com.campus.water.service.MqttService - MQTT连接断开: Timed out while waiting to write messages to the server
2025-05-24 13:46:36.233 [MQTT Ping: campus-water-server] INFO  com.campus.water.service.MqttService - 正在尝试重新连接...
2025-05-24 13:46:36.275 [MQTT Ping: campus-water-server] INFO  com.campus.water.service.MqttService - 重新连接成功
2025-05-24 15:44:02.330 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 15:44:02.396 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 15:44:12.819 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 53600 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 15:44:12.822 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 15:44:14.697 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 15:44:14.716 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 15:44:14.717 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 15:44:14.718 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 15:44:14.877 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 15:44:14.877 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2003 ms
2025-05-24 15:44:15.079 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 15:44:15.351 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 15:44:15.606 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 15:44:15.974 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 15:44:15.998 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 15:44:16.548 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 15:44:16.578 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 15:44:16.596 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 4.692 seconds (JVM running for 6.702)
2025-05-24 15:51:59.275 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
       "id": 1,
       "locate": "教学楼A区",
       "TDS": "100",
       "status": 1
   }
2025-05-24 15:51:59.457 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 15:51:59.985 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
; Duplicate entry '1' for key 'water_dispenser.PRIMARY'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'water_dispenser.PRIMARY'
2025-05-24 15:52:23.018 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息:    {
       "id": 1,
       "locate": "教学楼A区",
       "TDS": "100",
       "status": 1
   }
2025-05-24 15:52:23.018 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 15:52:23.030 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=1, locate=教学楼A区, tds=100, status=1, tip=null, time=null)
2025-05-24 15:52:47.596 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
    "id": 2,
    "locate": "图书馆",
    "TDS": "95",
    "status": 1
}
2025-05-24 15:52:47.597 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 15:52:47.610 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=2, locate=图书馆, tds=95, status=1, tip=null, time=null)
2025-05-24 15:53:01.052 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
    "id": 3,
    "locate": "食堂",
    "TDS": "105",
    "status": 1
}
2025-05-24 15:53:01.053 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 15:53:01.060 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=3, locate=食堂, tds=105, status=1, tip=null, time=null)
2025-05-24 15:53:36.954 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subWatercard] 的消息:    {
       "id": "CARD001",
       "name": "张三"
   }
2025-05-24 15:53:36.955 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 15:53:36.981 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=CARD001, name=张三)
2025-05-24 15:53:55.918 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subWatercard] 的消息: {
    "id": "CARD002",
    "name": "李四"
}
2025-05-24 15:53:55.922 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 15:53:55.967 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=CARD002, name=李四)
2025-05-24 15:54:03.775 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subWatercard] 的消息: {
    "id": "CARD003",
    "name": "王五"
}
2025-05-24 15:54:03.776 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 15:54:03.791 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=CARD003, name=王五)
2025-05-24 16:05:10.874 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 16:05:10.934 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 16:05:18.635 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 32640 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 16:05:18.640 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 16:05:20.179 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 16:05:20.189 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 16:05:20.191 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 16:05:20.191 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 16:05:20.296 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 16:05:20.296 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1599 ms
2025-05-24 16:05:20.501 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 16:05:20.697 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 16:05:20.874 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 16:05:21.256 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 16:05:21.281 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 16:05:21.798 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 16:05:21.834 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 16:05:21.847 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.712 seconds (JVM running for 4.773)
2025-05-24 16:08:41.491 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
    "dispenserId": 1,
    "cardId": "CARD001",
    "drink": 200,
    "time": "10:30:00"
}
2025-05-24 16:08:41.691 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 16:08:41.723 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"dispenserId":1,"cardId":"CARD001","time":"10:30:00","drink":200}
2025-05-24 16:08:41.725 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 1, cardId: CARD001
2025-05-24 16:08:42.290 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=1, locate=教学楼A区, tds=100, status=1, tip=null, time=null)
2025-05-24 16:08:42.300 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水卡: WaterCard(id=CARD001, name=张三)
2025-05-24 16:08:42.301 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(dispenserId=1, cardId=CARD001, cardName=张三, drink=200, time=10:30:00)
2025-05-24 16:08:42.351 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=1, cardId=CARD001, cardName=张三, drink=200, time=10:30:00)
2025-05-24 16:09:19.760 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: 
{
    "dispenserId": 1,
    "cardId": "CARD002",
    "drink": 150,
    "time": "10:35:00"
}
2025-05-24 16:09:19.761 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 16:09:19.761 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"dispenserId":1,"cardId":"CARD002","time":"10:35:00","drink":150}
2025-05-24 16:09:19.762 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 1, cardId: CARD002
2025-05-24 16:09:19.765 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=1, locate=教学楼A区, tds=100, status=1, tip=null, time=null)
2025-05-24 16:09:19.769 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水卡: WaterCard(id=CARD002, name=李四)
2025-05-24 16:09:19.769 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(dispenserId=1, cardId=CARD002, cardName=李四, drink=150, time=10:35:00)
2025-05-24 16:09:19.779 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=1, cardId=CARD002, cardName=李四, drink=150, time=10:35:00)
2025-05-24 16:09:41.507 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
    "dispenserId": 2,
    "cardId": "CARD001",
    "drink": 300,
    "time": "11:00:00"
}
2025-05-24 16:09:41.508 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 16:09:41.509 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"dispenserId":2,"cardId":"CARD001","time":"11:00:00","drink":300}
2025-05-24 16:09:41.509 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 2, cardId: CARD001
2025-05-24 16:09:41.521 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=2, locate=图书馆, tds=95, status=1, tip=null, time=null)
2025-05-24 16:09:41.526 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水卡: WaterCard(id=CARD001, name=张三)
2025-05-24 16:09:41.527 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(dispenserId=2, cardId=CARD001, cardName=张三, drink=300, time=11:00:00)
2025-05-24 16:09:41.539 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=2, cardId=CARD001, cardName=张三, drink=300, time=11:00:00)
2025-05-24 16:09:55.587 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
    "dispenserId": 2,
    "cardId": "CARD003",
    "drink": 250,
    "time": "11:05:00"
}
2025-05-24 16:09:55.588 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 16:09:55.588 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"dispenserId":2,"cardId":"CARD003","time":"11:05:00","drink":250}
2025-05-24 16:09:55.589 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 2, cardId: CARD003
2025-05-24 16:09:55.593 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=2, locate=图书馆, tds=95, status=1, tip=null, time=null)
2025-05-24 16:09:55.595 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水卡: WaterCard(id=CARD003, name=王五)
2025-05-24 16:09:55.595 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(dispenserId=2, cardId=CARD003, cardName=王五, drink=250, time=11:05:00)
2025-05-24 16:09:55.603 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=2, cardId=CARD003, cardName=王五, drink=250, time=11:05:00)
2025-05-24 16:10:13.301 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
    "dispenserId": 3,
    "cardId": "CARD002",
    "drink": 180,
    "time": "11:30:00"
}
2025-05-24 16:10:13.302 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 16:10:13.302 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"dispenserId":3,"cardId":"CARD002","time":"11:30:00","drink":180}
2025-05-24 16:10:13.303 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 3, cardId: CARD002
2025-05-24 16:10:13.307 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=3, locate=食堂, tds=105, status=1, tip=null, time=null)
2025-05-24 16:10:13.309 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水卡: WaterCard(id=CARD002, name=李四)
2025-05-24 16:10:13.310 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(dispenserId=3, cardId=CARD002, cardName=李四, drink=180, time=11:30:00)
2025-05-24 16:10:13.318 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=3, cardId=CARD002, cardName=李四, drink=180, time=11:30:00)
2025-05-24 16:10:26.561 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {
    "dispenserId": 3,
    "cardId": "CARD003",
    "drink": 220,
    "time": "11:35:00"
}
2025-05-24 16:10:26.562 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 16:10:26.562 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"dispenserId":3,"cardId":"CARD003","time":"11:35:00","drink":220}
2025-05-24 16:10:26.562 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 3, cardId: CARD003
2025-05-24 16:10:26.569 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=3, locate=食堂, tds=105, status=1, tip=null, time=null)
2025-05-24 16:10:26.573 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水卡: WaterCard(id=CARD003, name=王五)
2025-05-24 16:10:26.573 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(dispenserId=3, cardId=CARD003, cardName=王五, drink=220, time=11:35:00)
2025-05-24 16:10:26.578 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(dispenserId=3, cardId=CARD003, cardName=王五, drink=220, time=11:35:00)
2025-05-24 16:11:27.595 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {
    "name": "张三"
}
2025-05-24 16:11:27.596 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水记录列表查询请求...
2025-05-24 16:11:27.607 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"dispenserId":1,"time":"10:30:00","drink":200},{"dispenserId":2,"time":"11:00:00","drink":300}]
2025-05-24 16:11:27.614 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:11:27.614 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水记录列表查询结果: 2条记录
2025-05-24 16:15:03.551 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {
    "id": 1
}

2025-05-24 16:15:03.552 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水记录列表查询请求...
2025-05-24 16:15:03.566 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRidDataPub]: [{"dispenserId":1,"time":"10:30:00","drink":200},{"dispenserId":1,"time":"10:35:00","drink":150}]
2025-05-24 16:15:03.576 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:15:03.577 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水记录列表查询结果: 2条记录
2025-05-24 16:29:20.393 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {
    "name": "张三"
}

2025-05-24 16:29:20.395 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水记录列表查询请求...
2025-05-24 16:29:20.411 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"dispenserId":1,"time":"10:30:00","drink":200},{"dispenserId":2,"time":"11:00:00","drink":300}]
2025-05-24 16:29:20.425 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:29:20.426 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水记录列表查询结果: 2条记录
2025-05-24 16:30:59.743 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 16:30:59.802 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 16:31:07.535 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 5576 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 16:31:07.537 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 16:31:09.038 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 16:31:09.056 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 16:31:09.060 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 16:31:09.060 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 16:31:09.211 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 16:31:09.211 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1635 ms
2025-05-24 16:31:09.413 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 16:31:09.628 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 16:31:09.832 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 16:31:10.216 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 16:31:10.238 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 16:31:10.573 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 16:31:10.590 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 16:31:10.600 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.666 seconds (JVM running for 4.803)
2025-05-24 16:32:14.851 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {
    "name": "张三"
}
2025-05-24 16:32:15.063 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水记录列表查询请求...
2025-05-24 16:32:15.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"10:30:00","drink":200},{"id":2,"time":"11:00:00","drink":300}]
2025-05-24 16:32:15.214 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:32:15.215 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水记录列表查询结果: 2条记录
2025-05-24 16:32:59.829 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {
    "id": 1
}

2025-05-24 16:32:59.830 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水记录列表查询请求...
2025-05-24 16:32:59.863 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRidDataPub]: [{"id":1,"time":"10:30:00","drink":200},{"id":1,"time":"10:35:00","drink":150}]
2025-05-24 16:32:59.888 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:32:59.888 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水记录列表查询结果: 2条记录
2025-05-24 16:40:43.251 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 16:40:43.322 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 16:40:47.924 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 27696 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 16:40:47.928 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 16:40:49.595 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 16:40:49.609 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 16:40:49.610 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 16:40:49.611 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 16:40:49.702 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 16:40:49.702 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1723 ms
2025-05-24 16:40:49.915 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 16:40:50.176 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 16:40:50.323 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 16:40:50.692 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 16:40:50.712 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 16:40:51.128 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 16:40:51.154 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 16:40:51.166 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.93 seconds (JVM running for 4.929)
2025-05-24 16:42:33.753 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {
    "name": "张三"
}
2025-05-24 16:42:33.832 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水记录列表查询请求...
2025-05-24 16:42:33.956 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"10:30:00","drink":200},{"id":2,"time":"11:00:00","drink":300}]
2025-05-24 16:42:33.966 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:42:33.966 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水记录列表查询结果: 2条记录
2025-05-24 16:47:07.536 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIdData] 的消息: {
    "id": 1
}
2025-05-24 16:47:07.536 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [1] 的饮水记录列表查询请求...
2025-05-24 16:47:07.551 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRidDataPub]: [{"id":1,"time":"10:30:00","drink":200},{"id":1,"time":"10:35:00","drink":150}]
2025-05-24 16:47:07.559 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 16:47:07.560 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [1] 的饮水记录列表查询结果: 2条记录
2025-05-24 17:44:52.698 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 17:44:52.756 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 17:45:08.045 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 52824 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 17:45:08.050 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 17:45:14.460 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 17:45:14.500 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 17:45:14.510 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 17:45:14.512 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 17:45:15.365 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 17:45:15.366 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 7217 ms
2025-05-24 17:45:15.632 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 17:45:15.932 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 17:45:16.237 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 17:45:16.610 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 17:45:16.628 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 17:45:17.208 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 17:45:17.246 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 17:45:17.260 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 10.108 seconds (JVM running for 18.523)
2025-05-24 17:45:43.063 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subTip] 的消息: {"id":12000,"tip":"Warning"}
2025-05-24 17:45:43.173 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机故障信息...
2025-05-24 17:45:43.269 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 饮水机 [12000] 不存在，无法更新故障信息
2025-05-24 17:46:15.635 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12000,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 17:46:15.636 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 17:46:15.659 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12000, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 17:47:41.299 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12000,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 17:47:41.299 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 17:47:41.481 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12000' for key 'water_dispenser.PRIMARY'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12000' for key 'water_dispenser.PRIMARY'
; Duplicate entry '12000' for key 'water_dispenser.PRIMARY'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12000' for key 'water_dispenser.PRIMARY'
2025-05-24 17:49:32.614 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 17:49:32.633 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 17:49:43.701 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 48860 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 17:49:43.708 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 17:49:46.137 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 17:49:46.153 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 17:49:46.155 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 17:49:46.156 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 17:49:46.347 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 17:49:46.347 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2525 ms
2025-05-24 17:49:46.624 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 17:49:47.004 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 17:49:47.386 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 17:49:47.796 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 17:49:47.810 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 17:49:48.543 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 17:49:48.584 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 17:49:48.608 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 6.071 seconds (JVM running for 7.718)
2025-05-24 17:50:02.318 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12000,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 17:50:02.669 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 17:50:02.816 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12000, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 17:53:28.925 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 17:53:28.944 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 17:53:34.844 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 54992 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 17:53:34.851 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 17:53:36.999 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 17:53:37.013 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 17:53:37.016 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 17:53:37.017 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 17:53:37.178 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 17:53:37.179 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2184 ms
2025-05-24 17:53:37.420 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 17:53:37.745 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 17:53:38.023 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 17:53:38.418 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 17:53:38.459 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 17:53:39.050 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 17:53:39.089 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 17:53:39.105 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 5.288 seconds (JVM running for 6.592)
2025-05-24 17:53:52.537 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subCard] 的消息: {"drink":0,"id":"D3 F5 BB 27","time":"17:53:38"}
2025-05-24 17:53:52.679 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 17:53:52.705 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"D3 F5 BB 27","time":"17:53:38","drink":0}
2025-05-24 17:53:52.705 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: null, cardId: null
2025-05-24 17:53:52.797 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 17:53:59.033 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subCard] 的消息: {"drink":0,"id":"D3 F5 BB 27","time":"17:53:44"}
2025-05-24 17:53:59.034 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 17:53:59.034 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"D3 F5 BB 27","time":"17:53:44","drink":0}
2025-05-24 17:53:59.034 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: null, cardId: null
2025-05-24 17:53:59.036 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 17:54:27.764 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12000,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 17:54:27.765 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 17:54:27.913 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12000' for key 'water_dispenser.PRIMARY'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12000' for key 'water_dispenser.PRIMARY'
; Duplicate entry '12000' for key 'water_dispenser.PRIMARY'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '12000' for key 'water_dispenser.PRIMARY'
2025-05-24 17:55:03.859 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12010,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 17:55:03.860 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 17:55:03.869 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 17:55:13.202 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subCard] 的消息: {"drink":0,"id":"D3 F5 BB 27","time":"17:54:58"}
2025-05-24 17:55:13.203 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 17:55:13.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"D3 F5 BB 27","time":"17:54:58","drink":0}
2025-05-24 17:55:13.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: null, cardId: null
2025-05-24 17:55:13.209 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 18:03:12.999 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subCard] 的消息: {"drink":0,"id":"D3 F5 BB 27","time":"18:02:58"}
2025-05-24 18:03:13.000 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 18:03:13.002 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"D3 F5 BB 27","time":"18:02:58","drink":0}
2025-05-24 18:03:13.002 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: null, cardId: null
2025-05-24 18:03:13.007 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 饮水机 [null] 不存在，无法添加饮水记录
2025-05-24 18:24:33.056 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 18:24:33.069 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 18:25:19.552 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 48572 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 18:25:19.559 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 18:25:22.399 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 18:25:22.416 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 18:25:22.419 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 18:25:22.419 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 18:25:22.576 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 18:25:22.577 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2929 ms
2025-05-24 18:25:22.858 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 18:25:23.258 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 18:25:23.681 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 18:25:24.112 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 18:25:24.151 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 18:25:24.785 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 18:25:24.840 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 18:25:24.859 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 6.391 seconds (JVM running for 8.209)
2025-05-24 18:25:47.430 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 18:25:47.446 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 18:26:00.822 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 55288 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 18:26:00.827 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 18:26:02.876 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 18:26:02.885 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 18:26:02.887 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 18:26:02.888 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 18:26:02.996 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 18:26:02.997 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2094 ms
2025-05-24 18:26:03.204 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 18:26:03.625 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 18:26:04.015 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 18:26:04.391 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 18:26:04.409 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 18:26:05.039 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 18:26:05.091 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 18:26:05.107 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 5.223 seconds (JVM running for 6.308)
2025-05-24 18:35:10.319 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 18:35:10.688 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 18:35:26.126 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 54984 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 18:35:26.129 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 18:35:28.422 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 18:35:28.434 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 18:35:28.435 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 18:35:28.437 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 18:35:28.566 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 18:35:28.566 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2332 ms
2025-05-24 18:35:28.791 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 18:35:29.013 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 18:35:29.209 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 18:35:29.579 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 18:35:29.605 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 18:35:30.316 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 18:35:30.355 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 18:35:30.386 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 5.515 seconds (JVM running for 7.339)
2025-05-24 18:43:45.039 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 18:43:45.099 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 19:15:25.422 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 3612 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 19:15:25.428 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 19:15:27.837 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 19:15:27.861 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 19:15:27.865 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 19:15:27.865 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 19:15:28.038 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 19:15:28.038 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2516 ms
2025-05-24 19:15:28.288 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 19:15:28.714 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 19:15:29.002 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 19:15:29.407 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 19:15:29.450 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 19:15:30.171 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 19:15:30.221 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 19:15:30.239 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 6.011 seconds (JVM running for 7.638)
2025-05-24 19:16:37.118 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12010,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 19:16:37.273 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 19:16:37.592 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 19:16:53.918 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":0,"id":"D3 F5 BB 27","time":"19:16:39"}
2025-05-24 19:16:53.920 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 19:16:53.929 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 为饮水卡 [D3 F5 BB 27] 分配名字: 张三
2025-05-24 19:16:53.944 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=D3 F5 BB 27, name=张三, time=19:16:39, drink=0)
2025-05-24 19:16:56.480 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":0,"id":"1","time":"19:16:39"}
2025-05-24 19:16:56.481 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 19:16:56.500 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"1","time":"19:16:39","drink":0}
2025-05-24 19:16:56.500 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 1, drink: 0, time: 19:16:39
2025-05-24 19:16:56.504 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 饮水机 [1] 不存在，无法添加饮水记录
2025-05-24 19:18:13.594 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12010,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 19:18:13.596 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 19:18:13.607 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 19:18:13.616 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 19:18:23.136 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":0,"id":"D3 F5 BB 27","time":"19:18:08"}
2025-05-24 19:18:23.137 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 19:18:23.145 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [D3 F5 BB 27] 已存在，更新数据
2025-05-24 19:18:23.161 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=D3 F5 BB 27, name=张三, time=19:18:08, drink=0)
2025-05-24 19:18:25.768 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":0,"id":"12010","time":"19:18:08"}
2025-05-24 19:18:25.769 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 19:18:25.770 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"19:18:08","drink":0}
2025-05-24 19:18:25.771 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 0, time: 19:18:08
2025-05-24 19:18:25.776 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 19:18:25.792 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=0, time=19:18:08)
2025-05-24 19:18:25.803 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=0, time=19:18:08)
2025-05-24 20:02:49.176 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:02:49.199 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:02:57.205 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 20368 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:02:57.209 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:02:58.714 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:02:58.739 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:02:58.741 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:02:58.742 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:02:58.917 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:02:58.917 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1641 ms
2025-05-24 20:02:59.198 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:02:59.556 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:02:59.743 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:03:00.110 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:03:00.123 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:03:00.575 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:03:00.619 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:03:00.634 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 4.031 seconds (JVM running for 5.091)
2025-05-24 20:03:32.108 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"李想"}
2025-05-24 20:03:32.212 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [李想] 的饮水记录列表查询请求...
2025-05-24 20:03:32.259 [MQTT Call: campus-water-server] WARN  com.campus.water.service.MqttService - 未找到学生 [李想] 的饮水卡信息
2025-05-24 20:03:32.270 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"error":"饮水卡不存在"}
2025-05-24 20:03:32.274 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:06:24.477 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"李想"}
2025-05-24 20:06:24.478 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [李想] 的饮水记录列表查询请求...
2025-05-24 20:06:24.487 [MQTT Call: campus-water-server] WARN  com.campus.water.service.MqttService - 未找到学生 [李想] 的饮水卡信息
2025-05-24 20:06:24.488 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: {"error":"饮水卡不存在"}
2025-05-24 20:06:24.500 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:08:22.248 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"李想"}
2025-05-24 20:08:22.249 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [李想] 的饮水记录列表查询请求...
2025-05-24 20:08:22.265 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"19:18:08","drink":0}]
2025-05-24 20:08:22.273 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:08:22.274 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [李想] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:15:08.626 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:15:08.628 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:15:08.666 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 20:15:08.694 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:16:15.215 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:16:15.234 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:16:19.061 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 55048 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:16:19.063 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:16:20.356 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:16:20.366 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:16:20.367 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:16:20.367 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:16:20.462 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:16:20.462 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1351 ms
2025-05-24 20:16:20.587 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:16:20.849 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:16:21.060 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:16:21.423 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:16:21.455 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:16:21.850 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:16:21.872 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:16:21.883 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.371 seconds (JVM running for 4.359)
2025-05-24 20:17:31.688 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:17:31.712 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:17:35.199 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 54960 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:17:35.202 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:17:36.599 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:17:36.611 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:17:36.613 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:17:36.613 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:17:36.805 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:17:36.805 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1564 ms
2025-05-24 20:17:36.955 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:17:37.166 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:17:37.471 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:17:37.852 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:17:37.864 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:17:38.299 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:17:38.338 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:17:38.354 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.637 seconds (JVM running for 4.413)
2025-05-24 20:19:11.967 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:19:11.986 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:19:15.873 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 35144 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:19:15.875 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:19:17.219 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:19:17.228 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:19:17.229 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:19:17.230 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:19:17.360 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:19:17.361 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1434 ms
2025-05-24 20:19:17.598 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:19:17.923 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:19:18.187 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:19:18.549 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:19:18.563 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:19:19.186 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:19:19.223 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:19:19.246 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.923 seconds (JVM running for 4.695)
2025-05-24 20:20:45.603 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:20:45.618 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:20:49.053 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 56680 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:20:49.057 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:20:50.566 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:20:50.581 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:20:50.582 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:20:50.583 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:20:50.726 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:20:50.727 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1632 ms
2025-05-24 20:20:50.961 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:20:51.198 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:20:51.414 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:20:51.782 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:20:51.790 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:20:52.345 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:20:52.393 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:20:52.410 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.862 seconds (JVM running for 4.606)
2025-05-24 20:22:42.662 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"李想"}
2025-05-24 20:22:42.762 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [李想] 的饮水记录列表查询请求...
2025-05-24 20:22:42.862 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"19:18:08","drink":0}]
2025-05-24 20:22:42.867 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:22:42.867 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [李想] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:23:40.804 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:23:40.817 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:23:44.516 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 53104 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:23:44.518 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:23:45.887 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:23:45.906 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:23:45.909 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:23:45.910 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:23:46.063 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:23:46.064 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1508 ms
2025-05-24 20:23:46.291 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:23:46.529 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:23:46.724 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:23:47.088 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:23:47.106 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:23:47.581 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:23:47.606 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:23:47.618 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.538 seconds (JVM running for 4.326)
2025-05-24 20:26:31.543 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:26:31.559 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:26:35.562 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 49960 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:26:35.563 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:26:36.826 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:26:36.835 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:26:36.836 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:26:36.838 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:26:36.939 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:26:36.939 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1338 ms
2025-05-24 20:26:37.103 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:26:37.280 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:26:37.415 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:26:37.787 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:26:37.806 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:26:38.334 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:26:38.356 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:26:38.367 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.283 seconds (JVM running for 3.979)
2025-05-24 20:27:44.115 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:27:44.123 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:27:48.038 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 16904 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:27:48.040 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:27:49.058 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:27:49.064 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:27:49.066 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:27:49.066 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:27:49.141 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:27:49.142 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1057 ms
2025-05-24 20:27:49.320 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:27:49.600 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:27:49.805 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:27:50.174 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:27:50.184 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:27:50.589 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:27:50.611 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:27:50.619 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.168 seconds (JVM running for 3.882)
2025-05-24 20:27:55.525 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:27:55.613 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:27:55.697 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"19:18:08","drink":0}]
2025-05-24 20:27:55.701 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:27:55.701 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:27:55.702 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"19:18:08","drink":0}]
2025-05-24 20:27:55.707 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:30:06.342 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:30:06.343 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:30:06.353 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"19:18:08","drink":0},{"id":12010,"time":"20:34:09","drink":200}]
2025-05-24 20:30:06.363 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:30:06.363 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 2条记录
2025-05-24 20:30:06.366 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"19:18:08","drink":0},{"id":12010,"time":"20:34:09","drink":200}]
2025-05-24 20:30:06.367 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:34:16.815 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12010,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 20:34:16.816 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:34:16.845 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:34:19.947 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:34:19.962 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:34:24.543 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 56456 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:34:24.546 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:34:25.861 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:34:25.869 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:34:25.871 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:34:25.871 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:34:25.958 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:34:25.958 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1347 ms
2025-05-24 20:34:26.107 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:34:26.331 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:34:26.645 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:34:27.054 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:34:27.061 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:34:27.450 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:34:27.478 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:34:27.494 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.613 seconds (JVM running for 4.619)
2025-05-24 20:35:04.500 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12010,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 20:35:04.573 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:35:04.612 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 20:35:04.617 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:35:34.447 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":14,"id":"93 27 68 EC","time":"20:35:33"}
2025-05-24 20:35:34.448 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:35:34.450 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 为饮水卡 [93 27 68 EC] 分配名字: 张三
2025-05-24 20:35:34.456 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=93 27 68 EC, name=张三, time=20:35:33, drink=14)
2025-05-24 20:35:37.021 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":14,"id":"12010","time":"20:35:33"}
2025-05-24 20:35:37.021 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:35:37.030 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:35:33","drink":14}
2025-05-24 20:35:37.031 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 14, time: 20:35:33
2025-05-24 20:35:37.033 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:35:37.041 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=14, time=20:35:33)
2025-05-24 20:35:37.046 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=14, time=20:35:33)
2025-05-24 20:36:31.846 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:36:31.846 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:36:31.853 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14}]
2025-05-24 20:36:31.860 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:36:31.860 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:36:31.861 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14}]
2025-05-24 20:36:31.867 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:36:39.693 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:36:39.694 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:36:39.699 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14}]
2025-05-24 20:36:39.703 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:36:39.703 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:36:39.704 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14}]
2025-05-24 20:36:39.705 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:36:53.126 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:36:53.127 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:36:53.134 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14}]
2025-05-24 20:36:53.146 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:36:53.147 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:36:53.149 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14}]
2025-05-24 20:36:53.150 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:36:54.642 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":37,"id":"93 27 68 EC","time":"20:36:54"}
2025-05-24 20:36:54.643 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:36:54.649 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:36:54.665 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:36:54, drink=37)
2025-05-24 20:36:57.215 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":37,"id":"12010","time":"20:36:54"}
2025-05-24 20:36:57.216 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:36:57.216 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:36:54","drink":37}
2025-05-24 20:36:57.216 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 37, time: 20:36:54
2025-05-24 20:36:57.220 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:36:57.222 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=37, time=20:36:54)
2025-05-24 20:36:57.232 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=37, time=20:36:54)
2025-05-24 20:37:02.455 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:37:02.456 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:37:02.458 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37}]
2025-05-24 20:37:02.464 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:37:02.464 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 2条记录
2025-05-24 20:37:02.464 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37}]
2025-05-24 20:37:02.465 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:37:14.835 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":61,"id":"93 27 68 EC","time":"20:37:14"}
2025-05-24 20:37:14.837 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:37:14.840 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:37:14.848 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:37:14, drink=61)
2025-05-24 20:37:17.413 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":61,"id":"12010","time":"20:37:14"}
2025-05-24 20:37:17.414 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:37:17.414 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:37:14","drink":61}
2025-05-24 20:37:17.414 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 61, time: 20:37:14
2025-05-24 20:37:17.417 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:37:17.418 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=61, time=20:37:14)
2025-05-24 20:37:17.424 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=61, time=20:37:14)
2025-05-24 20:37:21.673 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:37:21.673 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:37:21.678 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61}]
2025-05-24 20:37:21.684 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:37:21.684 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 3条记录
2025-05-24 20:37:21.686 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61}]
2025-05-24 20:37:21.686 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:37:25.436 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":75,"id":"93 27 68 EC","time":"20:37:24"}
2025-05-24 20:37:25.437 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:37:25.441 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:37:25.452 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:37:24, drink=75)
2025-05-24 20:37:27.322 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:37:27.322 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:37:27.327 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61}]
2025-05-24 20:37:27.332 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:37:27.332 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 3条记录
2025-05-24 20:37:27.334 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61}]
2025-05-24 20:37:27.334 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:37:28.013 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":75,"id":"12010","time":"20:37:24"}
2025-05-24 20:37:28.014 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:37:28.014 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:37:24","drink":75}
2025-05-24 20:37:28.014 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 75, time: 20:37:24
2025-05-24 20:37:28.018 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:37:28.020 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=75, time=20:37:24)
2025-05-24 20:37:28.029 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=75, time=20:37:24)
2025-05-24 20:37:42.239 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":48,"id":"93 27 68 EC","time":"20:37:41"}
2025-05-24 20:37:42.240 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:37:42.243 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:37:42.256 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:37:41, drink=48)
2025-05-24 20:37:43.183 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"李想"}
2025-05-24 20:37:43.184 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [李想] 的饮水记录列表查询请求...
2025-05-24 20:37:43.194 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"20:37:41","drink":48}]
2025-05-24 20:37:43.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:37:43.205 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [李想] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:37:44.816 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":48,"id":"12010","time":"20:37:41"}
2025-05-24 20:37:44.816 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:37:44.816 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:37:41","drink":48}
2025-05-24 20:37:44.816 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 48, time: 20:37:41
2025-05-24 20:37:44.819 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:37:44.821 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=48, time=20:37:41)
2025-05-24 20:37:44.829 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=48, time=20:37:41)
2025-05-24 20:37:58.633 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subTip] 的消息: {"id":12010,"tip":"Error"}
2025-05-24 20:37:58.634 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机故障信息...
2025-05-24 20:37:58.634 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 无效的故障信息格式: Error
2025-05-24 20:38:01.430 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":48,"id":"D3 F5 BB 27","time":"20:38:00"}
2025-05-24 20:38:01.430 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:38:01.434 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 为饮水卡 [D3 F5 BB 27] 分配名字: 李四
2025-05-24 20:38:01.443 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据保存成功: WaterCard(id=D3 F5 BB 27, name=李四, time=20:38:00, drink=48)
2025-05-24 20:38:04.009 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":49,"id":"12010","time":"20:38:00"}
2025-05-24 20:38:04.010 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:38:04.010 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:38:00","drink":49}
2025-05-24 20:38:04.011 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 49, time: 20:38:00
2025-05-24 20:38:04.016 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:38:04.018 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=49, time=20:38:00)
2025-05-24 20:38:04.026 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=49, time=20:38:00)
2025-05-24 20:38:04.203 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:38:04.203 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:38:04.210 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61},{"id":12010,"time":"20:37:24","drink":75},{"id":12010,"time":"20:37:41","drink":48},{"id":12010,"time":"20:38:00","drink":49}]
2025-05-24 20:38:04.215 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:38:04.216 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 6条记录
2025-05-24 20:38:04.219 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61},{"id":12010,"time":"20:37:24","drink":75},{"id":12010,"time":"20:37:41","drink":48},{"id":12010,"time":"20:38:00","drink":49}]
2025-05-24 20:38:04.220 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:38:10.432 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":64,"id":"D3 F5 BB 27","time":"20:38:09"}
2025-05-24 20:38:10.433 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:38:10.435 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [D3 F5 BB 27] 已存在，更新数据
2025-05-24 20:38:10.442 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=D3 F5 BB 27, name=李四, time=20:38:09, drink=64)
2025-05-24 20:38:13.009 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":64,"id":"12010","time":"20:38:09"}
2025-05-24 20:38:13.009 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:38:13.010 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:38:09","drink":64}
2025-05-24 20:38:13.010 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 64, time: 20:38:09
2025-05-24 20:38:13.013 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:38:13.016 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=64, time=20:38:09)
2025-05-24 20:38:13.023 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=64, time=20:38:09)
2025-05-24 20:38:37.227 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"张三"}
2025-05-24 20:38:37.227 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水记录列表查询请求...
2025-05-24 20:38:37.231 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"20:38:09","drink":64}]
2025-05-24 20:38:37.244 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:38:37.245 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:39:04.419 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"李想"}
2025-05-24 20:39:04.420 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [李想] 的饮水记录列表查询请求...
2025-05-24 20:39:04.423 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"20:37:41","drink":48}]
2025-05-24 20:39:04.429 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:39:04.429 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [李想] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:39:08.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubNameData] 的消息: {"name":"张三"}
2025-05-24 20:39:08.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理学生 [张三] 的饮水记录列表查询请求...
2025-05-24 20:39:08.211 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subCard]: [{"id":1,"time":"20:38:09","drink":64}]
2025-05-24 20:39:08.219 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:39:08.219 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 学生 [张三] 的饮水记录列表查询结果: 1条记录
2025-05-24 20:39:12.740 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 20:39:12.741 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 20:39:12.747 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61},{"id":12010,"time":"20:37:24","drink":75},{"id":12010,"time":"20:37:41","drink":48},{"id":12010,"time":"20:38:00","drink":49},{"id":12010,"time":"20:38:09","drink":64}]
2025-05-24 20:39:12.754 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 20:39:12.755 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 7条记录
2025-05-24 20:39:12.757 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: [{"id":12010,"time":"20:35:33","drink":14},{"id":12010,"time":"20:36:54","drink":37},{"id":12010,"time":"20:37:14","drink":61},{"id":12010,"time":"20:37:24","drink":75},{"id":12010,"time":"20:37:41","drink":48},{"id":12010,"time":"20:38:00","drink":49},{"id":12010,"time":"20:38:09","drink":64}]
2025-05-24 20:39:12.758 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: can not cast to JSONObject.
com.alibaba.fastjson.JSONException: can not cast to JSONObject.
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:260)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:149)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.ClassCastException: class com.alibaba.fastjson.JSONArray cannot be cast to class com.alibaba.fastjson.JSONObject (com.alibaba.fastjson.JSONArray and com.alibaba.fastjson.JSONObject are in unnamed module of loader 'app')
	at com.alibaba.fastjson.JSON.parseObject(JSON.java:258)
	... 5 common frames omitted
2025-05-24 20:39:47.475 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12011,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 20:39:47.476 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:39:47.492 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12011, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:40:22.179 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":0,"id":"93 27 68 EC","time":"20:40:21"}
2025-05-24 20:40:22.179 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:40:22.184 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:40:22.191 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:40:21, drink=0)
2025-05-24 20:40:24.752 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":0,"id":"12010","time":"20:40:21"}
2025-05-24 20:40:24.752 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:40:24.752 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:40:21","drink":0}
2025-05-24 20:40:24.752 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 0, time: 20:40:21
2025-05-24 20:40:24.754 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:40:24.759 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=0, time=20:40:21)
2025-05-24 20:40:24.767 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=0, time=20:40:21)
2025-05-24 20:40:49.171 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":0,"id":"93 27 68 EC","time":"20:40:48"}
2025-05-24 20:40:49.172 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:40:49.186 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:40:49.198 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:40:48, drink=0)
2025-05-24 20:40:51.749 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":0,"id":"12010","time":"20:40:48"}
2025-05-24 20:40:51.749 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:40:51.750 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:40:48","drink":0}
2025-05-24 20:40:51.750 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 0, time: 20:40:48
2025-05-24 20:40:51.753 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:40:51.756 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=0, time=20:40:48)
2025-05-24 20:40:51.768 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=0, time=20:40:48)
2025-05-24 20:41:18.381 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":0,"id":"93 27 68 EC","time":"20:41:17"}
2025-05-24 20:41:18.381 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:41:18.383 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:41:18.390 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:41:17, drink=0)
2025-05-24 20:41:20.949 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":0,"id":"12010","time":"20:41:17"}
2025-05-24 20:41:20.949 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:41:20.950 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:41:17","drink":0}
2025-05-24 20:41:20.950 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 0, time: 20:41:17
2025-05-24 20:41:20.952 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:41:20.954 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=0, time=20:41:17)
2025-05-24 20:41:20.963 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=0, time=20:41:17)
2025-05-24 20:41:44.376 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12011,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 20:41:44.377 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:41:44.380 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:41:44.386 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:42:06.112 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subIDCard] 的消息: {"drink":23,"id":"93 27 68 EC","time":"20:42:05"}
2025-05-24 20:42:06.113 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水卡数据...
2025-05-24 20:42:06.115 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡 [93 27 68 EC] 已存在，更新数据
2025-05-24 20:42:06.121 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水卡数据更新成功: WaterCard(id=93 27 68 EC, name=李想, time=20:42:05, drink=23)
2025-05-24 20:42:08.707 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"drink":23,"id":"12010","time":"20:42:05"}
2025-05-24 20:42:08.707 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水记录数据...
2025-05-24 20:42:08.707 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 接收到的JSON数据: {"id":"12010","time":"20:42:05","drink":23}
2025-05-24 20:42:08.707 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 解析出的数据 - dispenserId: 12010, drink: 23, time: 20:42:05
2025-05-24 20:42:08.711 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 找到饮水机: WaterDispenser(id=12010, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:42:08.712 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 准备保存饮水记录: DrinkRecord(id=null, dispenserId=12010, drink=23, time=20:42:05)
2025-05-24 20:42:08.718 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水记录保存成功: DrinkRecord(id=null, dispenserId=12010, drink=23, time=20:42:05)
2025-05-24 20:43:23.793 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12011,"locate":"libray","TDS":"ok","status":"0"}
2025-05-24 20:43:23.793 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:43:23.796 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:43:23.799 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libray, tds=ok, status=0, tip=null, time=null)
2025-05-24 20:45:52.467 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:45:52.467 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:45:52.470 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 20:45:52.479 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:46:10.694 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:46:10.694 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:46:10.696 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:46:10.703 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:48:34.775 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:48:34.778 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:48:34.783 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:48:34.786 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:49:35.181 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:49:35.184 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:49:35.187 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:49:35.190 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:49:39.626 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:49:39.627 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:49:39.631 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:49:39.633 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:49:55.055 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:49:55.055 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:49:55.058 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:49:55.062 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:50:03.556 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:50:03.557 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:50:03.559 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:50:03.561 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:50:33.233 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:50:33.234 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:50:33.245 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:50:33.249 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:50:42.312 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:50:42.313 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:50:42.319 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 20:50:42.321 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:50:53.186 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 20:50:53.187 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 20:50:53.200 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 20:50:53.204 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 20:51:10.291 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 20:51:10.350 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 20:51:17.639 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 14644 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 20:51:17.643 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 20:51:19.242 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 20:51:19.251 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 20:51:19.252 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 20:51:19.252 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 20:51:19.336 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 20:51:19.336 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1621 ms
2025-05-24 20:51:19.453 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 20:51:19.642 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 20:51:19.810 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 20:51:20.171 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 20:51:20.184 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 20:51:20.780 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 20:51:20.806 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 20:51:20.816 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.847 seconds (JVM running for 4.782)
2025-05-24 21:02:33.363 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:02:33.485 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:02:33.592 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12010, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:02:43.276 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"图书馆",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:02:43.277 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:02:43.287 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12011, locate=图书馆, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:02:58.998 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:02:58.999 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:02:59.014 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:02:59.031 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:05:12.489 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:05:12.490 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:05:12.497 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:05:12.503 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:05:25.332 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:05:25.333 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:05:25.336 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:05:25.339 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:05:34.424 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:05:34.424 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:05:34.428 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:05:34.438 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:05:44.940 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary11",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:05:44.942 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:05:44.951 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:05:44.960 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary11, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:11:08.601 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary11",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:11:08.602 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:11:08.609 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:11:08.613 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary11, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:12:49.230 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:12:49.231 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:12:49.238 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:12:49.253 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:12:57.298 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:12:57.299 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:12:57.305 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:12:57.308 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:13:59.806 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:13:59.807 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:13:59.814 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:13:59.818 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:15:05.497 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:15:05.498 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:15:05.501 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:15:05.503 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:16:10.803 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:16:10.804 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:16:10.810 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:16:10.812 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:16:18.630 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:16:18.631 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:16:18.636 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:16:18.641 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:16:23.975 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:16:23.976 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:16:23.978 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:16:23.981 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:17:10.168 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:17:10.170 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:17:10.176 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:17:10.179 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:17:11.049 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:17:11.050 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:17:11.053 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:17:11.057 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:18:20.900 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:18:20.901 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:18:20.906 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:18:20.909 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:18:32.268 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:18:32.268 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:18:32.271 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:18:32.274 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:19:05.742 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary111",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:19:05.742 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:19:05.745 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:19:05.754 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary111, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:19:08.841 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12010}
2025-05-24 21:19:08.841 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12010] 的饮水记录列表查询请求...
2025-05-24 21:19:08.985 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: []
2025-05-24 21:19:09.000 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 21:19:09.000 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 的饮水记录列表查询结果: 0条记录
2025-05-24 21:19:09.005 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: []
2025-05-24 21:19:35.107 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary111",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:19:35.108 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:19:35.111 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:19:35.113 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary111, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:19:44.745 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:19:44.745 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:19:44.748 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:19:44.756 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:21:36.062 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:21:36.063 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:21:36.069 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:21:36.072 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:21:43.910 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:21:43.911 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:21:43.918 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:21:43.920 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:22:04.795 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:22:04.797 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:22:04.807 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:22:04.815 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:22:56.677 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:22:56.678 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:22:56.689 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:22:56.698 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:23:04.033 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:23:04.034 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:23:04.039 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:23:04.042 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:23:13.201 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:23:13.205 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:23:13.209 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:23:13.214 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:24:43.384 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:24:43.387 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:24:43.395 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:24:43.399 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:24:49.459 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:24:49.460 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:24:49.465 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:24:49.469 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:26:31.520 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:26:31.521 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:26:31.527 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:26:31.529 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:26:42.622 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:26:42.623 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:26:42.626 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:26:42.629 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12011, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:27:06.643 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12011,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:27:06.648 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:27:06.658 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12011] 已存在，更新数据
2025-05-24 21:27:07.656 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:27:12.710 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:27:12.711 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:27:12.714 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:27:12.724 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:28:10.699 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:28:10.702 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:28:10.704 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:28:10.705 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:28:58.138 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:28:58.140 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:28:58.144 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:28:58.146 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:30:27.898 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:30:27.912 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:30:35.729 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 58000 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:30:35.732 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:30:37.426 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:30:37.438 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:30:37.441 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:30:37.441 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:30:37.545 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:30:37.546 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1766 ms
2025-05-24 21:30:37.817 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:30:38.110 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:30:38.284 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:30:38.660 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:30:38.670 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:30:39.017 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:30:39.043 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:30:39.064 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.941 seconds (JVM running for 5.006)
2025-05-24 21:30:47.587 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:30:47.598 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:34:42.661 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 54484 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:34:42.665 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:34:44.067 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:34:44.081 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:34:44.083 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:34:44.083 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:34:44.173 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:34:44.173 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1449 ms
2025-05-24 21:34:44.323 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:34:44.724 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:34:44.979 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:34:45.344 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:34:45.353 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:34:45.785 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:34:45.807 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:34:45.820 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.717 seconds (JVM running for 4.75)
2025-05-24 21:35:15.746 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:35:15.840 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:35:15.892 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:35:16.045 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:35:24.439 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:35:24.439 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:35:24.442 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:35:24.445 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:35:51.598 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:35:51.599 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:35:51.603 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:35:51.606 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.update-Inline
### The error occurred while setting parameters
### SQL: UPDATE water_dispenser SET locate = ?, tds = ?, status = ?, tip = ?, time = ? WHERE id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:35:55.130 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"","drink":0}
2025-05-24 21:35:55.143 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:35:57.770 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","status":2}
2025-05-24 21:35:57.770 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:35:57.786 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:36:02.913 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"","drink":0}
2025-05-24 21:36:02.914 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:08.290 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:05","drink":0}
2025-05-24 21:36:08.291 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:09.282 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:36:09.300 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:36:13.093 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 57776 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:36:13.096 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:36:14.550 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:36:14.559 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:36:14.561 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:36:14.562 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:36:14.685 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:36:14.685 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1524 ms
2025-05-24 21:36:14.881 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:36:15.041 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:36:15.322 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:36:15.714 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:36:15.722 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:36:16.160 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:36:16.211 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:36:16.232 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.584 seconds (JVM running for 4.24)
2025-05-24 21:36:20.295 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:17","drink":0}
2025-05-24 21:36:20.471 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:26.292 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:23","drink":0}
2025-05-24 21:36:26.292 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:32.289 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:29","drink":0}
2025-05-24 21:36:32.290 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:38.287 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:35","drink":0}
2025-05-24 21:36:38.288 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:44.289 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:41","drink":0}
2025-05-24 21:36:44.289 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:36:50.289 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: {"id":"","time":"21:36:47","drink":0}
2025-05-24 21:36:50.290 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理消息时发生错误: syntax error, expect [, actual {, pos 0, fieldName null
com.alibaba.fastjson.JSONException: syntax error, expect [, actual {, pos 0, fieldName null
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1182)
	at com.alibaba.fastjson.parser.DefaultJSONParser.parseArray(DefaultJSONParser.java:1169)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:612)
	at com.alibaba.fastjson.JSON.parseArray(JSON.java:592)
	at com.campus.water.service.MqttService.messageArrived(MqttService.java:157)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.deliverMessage(CommsCallback.java:519)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.handleMessage(CommsCallback.java:417)
	at org.eclipse.paho.client.mqttv3.internal.CommsCallback.run(CommsCallback.java:214)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-05-24 21:37:56.143 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","status":2}
2025-05-24 21:37:56.145 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:37:56.408 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:40:29.170 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","status":0}
2025-05-24 21:40:29.173 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:40:29.184 [MQTT Call: campus-water-server] ERROR com.campus.water.service.MqttService - 处理饮水机数据失败: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
### The error may exist in com/campus/water/mapper/WaterDispenserMapper.java (best guess)
### The error may involve com.campus.water.mapper.WaterDispenserMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO water_dispenser (id, locate, tds, status, tip, time) VALUES (?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'time' in 'field list'
2025-05-24 21:41:13.798 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:41:13.825 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:41:21.725 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 3008 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:41:21.731 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:41:23.385 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:41:23.403 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:41:23.407 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:41:23.408 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:41:23.552 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:41:23.553 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1774 ms
2025-05-24 21:41:23.724 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:41:23.984 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:41:24.260 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:41:24.618 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:41:24.628 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:41:25.226 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:41:25.259 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:41:25.274 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 4.391 seconds (JVM running for 5.401)
2025-05-24 21:44:13.170 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:44:13.184 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:44:17.324 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 19312 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:44:17.327 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:44:18.877 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:44:18.894 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:44:18.896 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:44:18.897 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:44:19.040 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:44:19.040 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1654 ms
2025-05-24 21:44:19.240 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:44:19.492 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:44:19.669 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:44:20.025 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:44:20.032 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:44:20.442 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:44:20.469 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:44:20.482 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.849 seconds (JVM running for 4.98)
2025-05-24 21:45:02.040 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","status":0}
2025-05-24 21:45:02.136 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:45:02.194 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12345, locate=libray, tds=94, status=0, tip=null, time=null)
2025-05-24 21:46:01.162 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","status":0}
2025-05-24 21:46:01.163 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:46:01.175 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 21:46:01.188 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=94, status=0, tip=null, time=null)
2025-05-24 21:46:53.247 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:46:53.249 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:46:53.256 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:48:30.495 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":0
}
2025-05-24 21:48:30.496 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:48:30.499 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:48:30.502 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:48:44.605 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:48:44.606 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:48:44.610 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12010] 已存在，更新数据
2025-05-24 21:48:44.615 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:49:09.066 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","locate":"0"}
2025-05-24 21:49:09.066 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:49:09.072 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 21:49:09.082 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=0, tds=94, status=null, tip=null, time=null)
2025-05-24 21:50:44.493 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":94,"locate":"libray","status":"0"}
2025-05-24 21:50:44.495 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:50:44.511 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12345, locate=libray, tds=94, status=0, tip=null, time=null)
2025-05-24 21:51:10.528 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":91,"locate":"libray","status":"0"}
2025-05-24 21:51:10.528 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:51:10.531 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 21:51:10.541 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=91, status=0, tip=null, time=null)
2025-05-24 21:53:51.376 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 21:53:51.377 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:53:51.381 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 21:53:51.391 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
2025-05-24 21:53:55.887 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:53:55.904 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:54:18.069 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 25144 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:54:18.072 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:54:19.526 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:54:19.542 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:54:19.546 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:54:19.546 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:54:19.691 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:54:19.691 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1569 ms
2025-05-24 21:54:19.855 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:54:20.114 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:54:20.295 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:54:20.674 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:54:20.693 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:54:21.115 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:54:21.136 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:54:21.152 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.667 seconds (JVM running for 4.596)
2025-05-24 21:54:28.249 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:54:28.259 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:54:31.828 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 50744 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:54:31.832 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:54:33.438 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:54:33.447 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:54:33.448 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:54:33.449 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:54:33.534 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:54:33.535 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1655 ms
2025-05-24 21:54:33.714 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:54:33.879 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:54:34.128 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:54:34.489 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:54:34.498 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:54:35.057 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:54:35.080 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:54:35.090 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.893 seconds (JVM running for 4.618)
2025-05-24 21:55:09.177 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 21:55:09.305 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:55:09.364 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
2025-05-24 21:56:02.360 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 21:56:02.361 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:56:02.368 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 21:56:02.370 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
2025-05-24 21:56:40.681 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {
  "id": 12010,
  "locate":"libary",
  "TDS":"合格",
  "status":"0"
}
2025-05-24 21:56:40.682 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:56:40.693 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据保存成功: WaterDispenser(id=12010, locate=libary, tds=合格, status=0, tip=null, time=null)
2025-05-24 21:58:54.559 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-24 21:58:54.584 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-24 21:58:58.079 [main] INFO  c.c.water.WaterDispenserApplication - Starting WaterDispenserApplication using Java 21.0.4 on DESKTOP-BFCFFNA with PID 46620 (D:\java-project-mod\springboot-mqtt-campuswater\target\classes started by 12187 in D:\java-project-mod\springboot-mqtt-campuswater)
2025-05-24 21:58:58.082 [main] INFO  c.c.water.WaterDispenserApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-24 21:58:59.320 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-24 21:58:59.327 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-24 21:58:59.328 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-24 21:58:59.329 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.78]
2025-05-24 21:58:59.424 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-24 21:58:59.424 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1293 ms
2025-05-24 21:58:59.558 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-24 21:58:59.749 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-24 21:58:59.997 [main] INFO  com.campus.water.service.MqttService - 正在初始化MQTT客户端...
2025-05-24 21:59:00.349 [main] INFO  com.campus.water.service.MqttService - MQTT客户端连接成功
2025-05-24 21:59:00.357 [main] INFO  com.campus.water.service.MqttService - 已订阅所有主题
2025-05-24 21:59:00.777 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-24 21:59:00.809 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-24 21:59:00.828 [main] INFO  c.c.water.WaterDispenserApplication - Started WaterDispenserApplication in 3.258 seconds (JVM running for 4.012)
2025-05-24 21:59:08.625 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 21:59:08.736 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 21:59:08.808 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 21:59:08.813 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
2025-05-24 22:00:23.843 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 22:00:23.845 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 22:00:23.861 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 22:00:23.865 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
2025-05-24 22:00:39.432 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12345}
2025-05-24 22:00:39.432 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12345] 的饮水记录列表查询请求...
2025-05-24 22:00:39.467 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: []
2025-05-24 22:00:39.472 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 22:00:39.473 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 的饮水记录列表查询结果: 0条记录
2025-05-24 22:00:39.474 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: []
2025-05-24 22:00:46.600 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [pubIDdata] 的消息: {"id":12345}
2025-05-24 22:00:46.600 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机 [12345] 的饮水记录列表查询请求...
2025-05-24 22:00:46.603 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在发布消息到主题 [subRIDdata]: []
2025-05-24 22:00:46.607 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 消息发布成功
2025-05-24 22:00:46.608 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 的饮水记录列表查询结果: 0条记录
2025-05-24 22:00:46.609 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subRIDdata] 的消息: []
2025-05-24 22:01:26.809 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 22:01:26.810 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 22:01:26.814 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 22:01:26.819 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
2025-05-24 22:04:32.829 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 收到主题 [subDispenser] 的消息: {"id":12345,"TDS":95,"locate":"libray","status":"0"}
2025-05-24 22:04:32.830 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 正在处理饮水机数据...
2025-05-24 22:04:32.835 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机 [12345] 已存在，更新数据
2025-05-24 22:04:32.838 [MQTT Call: campus-water-server] INFO  com.campus.water.service.MqttService - 饮水机数据更新成功: WaterDispenser(id=12345, locate=libray, tds=95, status=0, tip=null, time=null)
